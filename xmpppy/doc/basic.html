<!-- $Id$ -->
<!--
basic
Объясняется принципы простейшего скриптования. Фактически уровень README.py.
advanced
Вольное изложение предмета
expert
описание API каждого модуля
-->
<h1>Preface.</h1>
<p>I'm very poor at my English. If you see any bugs in this text - please, let me know.</p>
<h1>Basic</h1>
<h2>Introduction.</h2>
<p>This topic intended for people who want to quickly try xmpppy for a simple task - like 
writing a command-line script for sending a single message.</p>
<h2>Writing a simple script</h2>
<p>Imagine simple script that sends message to one recipient.
Example:
<pre>
xsend test@jabber.org Hello there!
</pre>
So - let's start!
<br />
First - we declare ourself as a python script and importing needed modules:
<pre>
#!/usr/bin/python
import sys,os,xmpp
</pre>
after it we have to check if we have enough arguments
<pre>
if len(sys.argv)<2:
    print "Syntax: xsend JID text"
    sys.exit(0)
</pre>
after it we must decode arguments. Omitting all checks to simplify our script
<pre>
tojid=sys.argv[1]
text=' '.join(sys.argv[2:])
</pre>
One more non-jabber step: we have to to get our JabberID params. Presuming that all info
stored in ~/.xsend file
<pre>
jidparams={}
for ln in open(os.environ['HOME']+'/.xsend').readlines():
    key,val=ln.strip().split(' ',1)
    jidparams[key.lower()]=val
for mandatory in ['jid','password']:
    if mandatory not in jidparams.keys():
        open(os.environ['HOME']+'/.xsend.exmpl','w').write('#JID=romeo@montague.net\n#PASSWORD=juliet\n')
        print 'Please create ~/xsend config file.\nUse ~/xsend.exmpl as reference.'
        sys.exit(0)
</pre>
Thew! The most complex (non-jabber ;) ) part is finished. From now on we have to:
<ul>
<li>connect to jabber server</li>
<li>authenticate ourself</li>
<li>submit a message</li>
</ul>
Let's start:
<br />
0. Calculating our server name and creating Client class instance for it.
<pre>
jid=xmpp.JID(jidparams['jid'])
cl=xmpp.Client(jid.getDomain())
</pre>
